<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz: Memorial Legislativo Maranhense</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* Variáveis CSS para cores vibrantes */
        :root {
            --primary-blue: #3b82f6; /* Tailwind blue-500 */
            --primary-blue-dark: #2563eb; /* Tailwind blue-600 */
            --secondary-green: #10b981; /* Tailwind emerald-500 */
            --secondary-green-dark: #059669; /* Tailwind emerald-600 */
            --accent-red: #ef4444; /* Tailwind red-500 */
            --accent-red-dark: #dc2626; /* Tailwind red-600 */
            --light-blue-bg: #eff6ff; /* Tailwind blue-50 */
            --dark-text: #1f2937; /* Tailwind gray-800 */
            --medium-text: #4b5563; /* Tailwind gray-600 */
            --light-border: #d1d5db; /* Tailwind gray-300 */
            --card-bg: #ffffff;
             --strong-blue: #2b6cb0; /* Tailwind blue-800 */
             --strong-blue-dark: #2c5282; /* Tailwind blue-900 */
             /* Novas variáveis para o gradiente do ranking */
             --ranking-gradient-start: #bfdbfe; /* Tailwind blue-200 */
             --ranking-gradient-end: #93c5fd; /* Tailwind blue-300 */
             /* Nova variável para destaque de resposta correta ao errar */
             --highlight-correct-bg: #fee2e2; /* Tailwind red-100 */
             /* Nova variável para o fundo vermelho forte */
             --strong-red-bg: #f87171; /* Tailwind red-400 - um vermelho forte, mas não gritante */
             --strong-red-bg-dark: #ef4444; /* Tailwind red-500 - mais escuro para hover/active */
        }

        /* Estilos gerais do corpo */
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #e0f2fe 0%, #bfdbfe 100%); /* Gradiente de fundo suave */
            display: flex;
            justify-content: center;
            align-items: flex-start; /* Alinha ao topo */
            min-height: 100vh;
            padding: 20px; /* Reduzido para dar mais espaço vertical */
            color: var(--dark-text);
             /* Garante que o corpo ocupe a largura total disponível para melhor responsividade */
            width: 100%;
            overflow-y: auto; /* Permite rolagem no corpo se o conteúdo exceder a tela */
        }

        /* Contêiner principal do quiz */
        .quiz-container {
            background-color: var(--card-bg);
            padding: 30px; /* Reduzido para dar mais espaço interno */
            border-radius: 20px; /* Cantos mais arredondados */
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25); /* Sombra mais proeminente */
            width: 100%;
            max-width: 800px; /* Ajustado para um pouco menor */
            margin-top: 30px; /* Reduzido para dar mais espaço vertical */
            margin-bottom: 30px; /* Adicionado margem inferior */
            text-align: center; /* Centraliza o texto */
            animation: fadeInScale 0.8s ease-out; /* Animação de entrada combinada */
            overflow: hidden; /* Garante que as sombras internas fiquem contidas */
            position: relative; /* Para elementos decorativos e posicionamento absoluto */
             z-index: 1; /* Garante que esteja acima do fundo, mas abaixo dos modais (se reintroduzidos) */
             /* Adiciona flexbox para controlar a altura do conteúdo interno */
             display: flex;
             flex-direction: column;
             min-height: calc(100vh - 40px); /* Altura mínima baseada na viewport menos padding do body */
        }

        @keyframes fadeInScale {
            from { opacity: 0; transform: translateY(30px) scale(0.95); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        /* Elementos decorativos no contêiner principal */
         .quiz-container::before,
         .quiz-container::after {
             content: '';
             position: absolute;
             width: 150px;
             height: 150px;
             background: rgba(59, 130, 246, 0.1); /* Azul com transparência */
             border-radius: 50%;
             z-index: 0;
             filter: blur(40px);
         }
         .quiz-container::before {
             top: -75px;
             left: -75px;
         }
         .quiz-container::after {
             bottom: -75px;
             right: -75px;
         }
         .quiz-container > * {
             position: relative;
             z-index: 1;
         }


        /* Estilos do título principal */
        .main-title {
            font-size: 2.5rem; /* Título maior */
            font-weight: 800; /* Extra bold */
            margin-bottom: 30px; /* Mais espaço */
            color: var(--dark-text);
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
             flex-shrink: 0; /* Impede que o título encolha */
        }

        /* Tela Inicial */
        #start-screen {
            background-color: var(--light-blue-bg); /* Fundo azul claro vibrante */
            padding: 30px; /* Reduzido padding */
            border-radius: 16px; /* Cantos mais arredondados */
            margin-bottom: 20px; /* Reduzido */
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1); /* Sombra suave */
            display: flex; /* Usa flexbox para centralizar o conteúdo */
            flex-direction: column; /* Elementos um abaixo do outro */
            align-items: center; /* Centraliza horizontalmente */
             flex-grow: 1; /* Permite que a tela inicial cresça para preencher o espaço */
             justify-content: center; /* Centraliza verticalmente o conteúdo da tela inicial */
             max-width: 500px; /* Diminui a largura máxima da tela inicial */
             margin-left: auto; /* Centraliza a tela inicial */
             margin-right: auto; /* Centraliza a tela inicial */
        }

        /* Contêiner "Digite seu nome" na tela inicial com fundo vermelho forte */
        .start-container {
            margin-bottom: 30px; /* Reduzido espaço */
            width: 100%; /* Ocupa a largura do #start-screen */
            max-width: 380px; /* Ajusta a largura máxima do contêiner interno */
             background-color: var(--strong-red-bg); /* Fundo vermelho forte */
             padding: 20px; /* Adiciona padding interno */
             border-radius: 12px; /* Cantos arredondados */
             box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15); /* Sombra um pouco mais forte */
             transition: background-color 0.3s ease-in-out; /* Transição suave */
        }
         .start-container:hover {
             background-color: var(--strong-red-bg-dark); /* Vermelho mais escuro no hover */
         }

        .start-container label {
            font-size: 1.2rem; /* Tamanho maior */
            color: white; /* Cor do texto branca para contraste */
            margin-bottom: 10px; /* Reduzido espaço */
            display: block;
            font-weight: 700; /* Bold */
        }
        .start-container input[type="text"] {
            padding: 12px 15px; /* Reduzido padding */
            border: 2px solid var(--light-border); /* Borda um pouco mais grossa */
            border-radius: 10px; /* Cantos mais arredondados */
            width: 100%;
            max-width: 380px; /* Largura máxima maior */
            font-size: 1.1rem;
            text-align: center;
            margin-bottom: 20px; /* Reduzido espaço */
            transition: border-color 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
            color: var(--dark-text);
        }
         .start-container input[type="text"]:focus {
            outline: none;
            border-color: var(--primary-blue); /* Borda azul vibrante ao focar */
            box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.3); /* Sombra azul vibrante ao focar */
        }

        /* Estilos para o Ranking */
        .high-scores-container {
            margin-top: 20px; /* Reduzido margem */
            padding-top: 20px; /* Reduzido padding */
            border-top: 1px solid var(--light-border); /* Separador */
            text-align: left;
             width: 100%; /* Ocupa a largura do #start-screen */
            max-width: 380px; /* Mantém a mesma largura do start-container */
        }
        .high-scores-container h3 {
            font-size: 1.5rem; /* Tamanho maior */
            font-weight: 700; /* Bold */
            color: var(--dark-text);
            margin-bottom: 15px; /* Reduzido espaço */
            text-align: center;
        }
        .high-scores-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .high-scores-list li {
            /* background-color: var(--card-bg); */ /* Fundo branco removido */
            background: linear-gradient(to right, var(--ranking-gradient-start), var(--ranking-gradient-end)); /* Gradiente azul */
            padding: 10px 15px; /* Reduzido padding */
            border-radius: 10px; /* Cantos mais arredondados */
            margin-bottom: 10px; /* Reduzido espaço */
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.08); /* Sombra suave */
            display: flex;
            justify-content: space-between;
            font-size: 1rem; /* Reduzido tamanho da fonte */
            color: var(--dark-text); /* Cor do texto mais escura para contraste */
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out; /* Adiciona transição para sombra */
        }
        .high-scores-list li:hover {
            transform: translateX(5px); /* Efeito sutil ao passar o mouse */
            box-shadow: 0 6px 10px rgba(0, 0, 0, 0.12); /* Sombra maior */
        }
         .high-scores-list li strong {
            color: var(--dark-text); /* Cor mais escura para o nome */
            font-weight: 600; /* Semi-bold */
         }


        /* Estilos para a Área do Quiz (Score, Timer, Barra, Pergunta, Feedback) */
        #quiz-area {
             display: flex; /* Usa flexbox para organizar o conteúdo */
             flex-direction: column; /* Elementos um abaixo do outro */
             flex-grow: 1; /* Permite que a área do quiz cresça para preencher o espaço */
             overflow: hidden; /* Garante que o conteúdo não transborde verticalmente */
             padding-top: 20px; /* Adiciona padding superior para separar do título */
        }

        .score-timer-container {
            display: flex;
            justify-content: space-between; /* Espaça score e timer */
            align-items: center;
            margin-bottom: 10px; /* Reduzido para dar espaço para a mensagem de alerta */
            padding-bottom: 15px; /* Reduzido */
            border-bottom: 1px solid var(--light-border); /* Separador */
             flex-shrink: 0; /* Impede que este contêiner encolha */
        }
        .score-display {
            font-size: 1.4rem; /* Tamanho maior */
            font-weight: bold;
            color: var(--dark-text);
        }
        .timer-display {
            font-size: 1.4rem; /* Tamanho maior */
            font-weight: bold;
            color: var(--dark-text);
        }
        .timer-alert {
            color: var(--accent-red); /* Vermelho vibrante para alerta */
            font-weight: bold;
            animation: pulse 1s infinite; /* Animação de pulso */
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .time-warning-message {
            font-size: 1.1rem; /* Tamanho maior */
            color: var(--accent-red); /* Vermelho vibrante para a mensagem de aviso */
            font-weight: bold;
            margin-bottom: 20px; /* Espaço abaixo da mensagem */
            min-height: 1.2em; /* Altura mínima para evitar pulo de layout */
             flex-shrink: 0; /* Impede que este contêiner encolha */
        }

        .progress-bar-container {
            width: 100%;
            height: 12px; /* Altura maior */
            background-color: var(--light-border); /* Fundo da barra */
            border-radius: 6px; /* Cantos mais arredondados */
            overflow: hidden; /* Garante que a barra de progresso fique dentro do container */
            margin-bottom: 25px; /* Mais espaço */
             flex-shrink: 0; /* Impede que este contêiner encolha */
        }

        .progress-bar {
            height: 100%;
            width: 0%; /* Começa em 0% */
            background-color: var(--primary-blue); /* Cor inicial (azul vibrante) */
            border-radius: 6px;
            transition: width 1s linear, background-color 1s linear; /* Transição suave para largura e cor */
        }


        /* Área da Pergunta e Opções */
        .question-area {
            margin-bottom: 20px; /* Reduzido para dar mais espaço às opções */
            padding: 30px; /* Mantém padding interno */
            background-color: var(--card-bg); /* Fundo branco para o card principal */
            border-radius: 16px; /* Cantos mais arredondados para o card principal */
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1); /* Sombra para o card principal */
            text-align: left; /* Alinha o texto da pergunta à esquerda */
             flex-grow: 1; /* Permite que esta área cresça e ocupe o espaço disponível */
             overflow-y: auto; /* Adiciona scroll APENAS nas opções se necessário */
             display: flex;
             flex-direction: column;
             align-items: flex-start; /* Alinha o conteúdo à esquerda */
             min-height: 0; /* Permite que o flex item encolha abaixo do seu tamanho de conteúdo */
        }
         .question-number {
            font-size: 1.1rem; /* Tamanho maior */
            color: var(--medium-text);
            margin-bottom: 15px; /* Mantém espaço */
            font-weight: 600;
             flex-shrink: 0; /* Impede que o número da pergunta encolha */
         }
        .question h3 {
            font-size: 1.5rem; /* Tamanho do título da pergunta maior */
            margin-bottom: 20px; /* Mantém espaço */
            color: var(--dark-text);
            line-height: 1.6; /* Mantém espaçamento entre linhas */
             flex-shrink: 0; /* Impede que o título da pergunta encolha */
        }
        .options {
            text-align: left; /* Alinha as opções à esquerda */
             width: 100%; /* Garante que as opções ocupem a largura total da question-area */
             display: flex;
             flex-direction: column;
             gap: 8px; /* Reduzido o espaçamento entre as opções para economizar espaço */
             flex-grow: 1; /* Permite que o contêiner de opções cresça */
             overflow-y: auto; /* Adiciona scroll APENAS nas opções se necessário */
        }
        /* Estilo base para cada item de opção (label) */
        .options label {
            display: flex; /* Usa flexbox para alinhar radio e texto */
            align-items: center; /* Centraliza verticalmente */
            font-size: 1.1rem; /* Mantém tamanho */
            cursor: pointer; /* Cursor de mão */
            padding: 12px 18px; /* Reduzido o padding para economizar espaço vertical */
            border: 1px solid var(--light-border); /* Borda suave */
            border-radius: 10px; /* Cantos arredondados */
            transition: background-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out, transform 0.2s ease-in-out; /* Transição suave */
            background-color: var(--light-blue-bg); /* Fundo azul claro vibrante para o card da opção */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08); /* Sombra para o card da opção */
             flex-shrink: 0; /* Impede que as labels das opções encolham */

            /* --- Estilos Iniciais para Animação --- */
            opacity: 0; /* Começa invisível */
            transform: translateY(10px); /* Começa um pouco abaixo */
            /* -------------------------------------- */
        }
        .options label:hover {
            background-color: var(--primary-blue-dark); /* Azul mais forte ao passar o mouse */
            box-shadow: 0 6px 10px rgba(0, 0, 0, 0.12); /* Sombra maior */
            transform: translateY(-3px); /* Efeito sutil ao passar o mouse */
        }

         /* --- Estilos Finais para Animação (aplicado via JS) --- */
         .options label.option-item-animate {
             opacity: 1; /* Fica visível */
             transform: translateY(0); /* Volta para a posição original */
             /* Define a transição com o atraso (delay) usando a variável CSS */
             transition: opacity 0.4s ease-out var(--animation-delay), transform 0.4s ease-out var(--animation-delay), background-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out, transform 0.2s ease-in-out;
         }
         /* ------------------------------------------------------ */


         /* Estilo para destacar a resposta correta quando a resposta do usuário estiver incorreta */
         .options label.highlight-correct {
             background-color: var(--highlight-correct-bg); /* Fundo vermelho claro */
             border-color: var(--accent-red); /* Borda vermelha */
             font-weight: 600; /* Opcional: deixa o texto mais forte */
         }

         .options input[type="radio"] {
            margin-right: 15px; /* Mantém espaço entre o radio button e o texto */
            transform: scale(1.3); /* Mantém o tamanho do radio button */
            accent-color: var(--primary-blue); /* Cor padrão do radio button */
             flex-shrink: 0; /* Impede que o radio button encolha */
             /* Adiciona transição para a cor do radio button */
             transition: accent-color 0.3s ease-in-out;
        }
         /* Novo estilo para a bolinha verde ao acertar */
         .options label.correct input[type="radio"] {
             accent-color: var(--secondary-green-dark); /* Verde mais escuro */
         }
         /* Novo estilo para a bolinha vermelha ao errar */
         .options label.incorrect input[type="radio"] {
             accent-color: var(--accent-red-dark); /* Vermelho mais escuro */
         }


        .feedback {
            margin-top: 25px; /* Mantém espaço */
            font-size: 1.3rem; /* Tamanho maior */
            font-weight: bold;
            min-height: 30px; /* Mantém altura mínima */
             flex-shrink: 0; /* Impede que este contêiner encolha */
        }
        .feedback.correct {
            color: var(--secondary-green); /* Verde vibrante para correto */
        }
        .feedback.incorrect {
            color: var(--accent-red); /* Vermelho vibrante para incorreto */
        }

        /* Estilos dos Botões */
        button {
            display: block; /* Botão em bloco */
            width: 100%; /* Largura total */
            padding: 18px 28px; /* Mantém padding */
            background-color: var(--primary-blue); /* Azul padrão vibrante para o botão Próxima */
            color: white;
            border: none;
            border-radius: 10px; /* Cantos mais arredondados */
            font-size: 1.4rem; /* Tamanho da fonte maior para o botão Próxima */
            cursor: pointer;
            transition: background-color 0.2s ease-in-out, transform 0.1s ease-in-out, box-shadow 0.2s ease-in-out;
            margin-top: 30px; /* Mantém espaço acima do botão */
            font-weight: 700; /* Bold */
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1); /* Sombra suave */
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2); /* Leve sombra no texto do botão */
             flex-shrink: 0; /* Impede que este contêiner encolha */
        }
        button:hover {
            background-color: var(--primary-blue-dark); /* Azul mais escuro ao passar o mouse */
             transform: translateY(-3px); /* Efeito sutil ao passar o mouse */
             box-shadow: 0 8px 15px rgba(0, 0, 0, 0.15); /* Sombra maior */
        }
        button:active {
            transform: translateY(0);
             box-shadow: 3px 3px 6px rgba(0, 0, 0, 0.1); /* Sombra menor */
        }

         #start-button {
            margin-top: 25px; /* Mantém espaço */
            background-color: var(--strong-blue); /* Azul forte para o botão Começar */
            max-width: 380px; /* Define a largura máxima igual ao input */
            margin-left: auto; /* Centraliza o botão */
            margin-right: auto; /* Centraliza o botão */
             box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1); /* Sombra suave */
             /* Ajustes para combinar com o label */
             font-family: 'Inter', sans-serif; /* Mesma fonte */
             font-size: 1.3rem; /* Mesmo tamanho */
             font-weight: 700; /* Mesmo peso */
             color: #ffffff; /* Cor branca */

             /* Estilos para esconder inicialmente e animar */
            opacity: 0;
            pointer-events: none; /* Desabilita cliques quando invisível */
            transform: translateY(-20px); /* Começa um pouco acima (para deslizar para baixo) */
            transition: opacity 0.5s ease-out, transform 0.5s ease-out, background-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out; /* Adiciona transição para opacidade e transform */
            text-shadow: none; /* Remove a sombra de texto do botão Começar */
        }
         #start-button.visible {
             opacity: 1;
             pointer-events: auto; /* Habilita cliques quando visível */
             transform: translateY(0); /* Posição final */
         }

        #start-button:hover {
             background-color: var(--strong-blue-dark); /* Azul mais escuro */
             box-shadow: 0 8px 15px rgba(0, 0, 0, 0.15); /* Sombra maior */
        }
         #start-button:active {
            transform: translateY(0);
             box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1); /* Sombra menor */
        }

        /* Área de Resultados Finais */
        #quiz-results {
            margin-top: 40px; /* Mantém espaço */
            font-size: 1.8rem; /* Tamanho maior */
            font-weight: bold;
            text-align: center;
            color: var(--dark-text);
             flex-grow: 1; /* Permite que a área de resultados cresça */
             display: flex; /* Usa flexbox para organizar o conteúdo interno */
             flex-direction: column;
             justify-content: center; /* Centraliza verticalmente o conteúdo */
        }
         /* Estilos para os detalhes de desempenho na tela de resultados (oculto) */
         .performance-details {
             margin-top: 20px;
             font-size: 1.2rem;
             color: var(--dark-text);
             font-weight: 600;
             /* display: none; */ /* Oculto via JS em showFinalResults */
         }
         .performance-details p {
             margin-bottom: 8px;
         }
         .performance-details .correct-count {
             color: var(--secondary-green);
         }
         .performance-details .incorrect-count {
             color: var(--accent-red);
         }

        .final-score-display { /* Novo estilo para a pontuação final na tela de resultados (oculto) */
            font-size: 2.5rem; /* Tamanho da pontuação maior */
            font-weight: 700; /* Bold */
            color: var(--secondary-green); /* Verde vibrante para pontuação */
            margin-top: 25px; /* Mais espaço */
            margin-bottom: 20px; /* Espaço abaixo da pontuação */
            /* display: none; */ /* Oculto via JS em showFinalResults */
        }

        .restart-message {
            margin-top: 25px; /* Mantém espaço */
            font-size: 1.2rem; /* Tamanho maior */
            color: var(--medium-text);
             flex-shrink: 0; /* Impede que a mensagem encolha */
        }
        .hidden {
            display: none !important; /* Use !important para garantir que a ocultação funcione */
        }

         /* Estilos para o botão Voltar para o Início (oculto) */
         #back-to-start-button {
             margin-top: 30px;
             max-width: 300px; /* Define uma largura máxima para o botão */
             margin-left: auto; /* Centraliza o botão */
             margin-right: auto; /* Centraliza o botão */
             background-color: var(--strong-blue); /* Cor azul forte */
             font-size: 1.2rem; /* Tamanho da fonte ajustado */
             /* display: none; */ /* Oculto via JS */
         }
          #back-to-start-button:hover {
             background-color: var(--strong-blue-dark);
          }
          #back-to-start-button:active {
             transform: translateY(0);
          }

        /* Estilos para o Certificado com fundo vermelho forte */
        .certificate {
            border: 8px solid var(--primary-blue); /* Borda azul vibrante mais grossa */
            padding: 60px; /* Mais padding */
            margin-top: 40px; /* Mais espaço */
            background: var(--strong-red-bg); /* Fundo vermelho forte */
            border-radius: 16px; /* Cantos mais arredondados */
            box-shadow: 0 20px 30px rgba(0, 0, 0, 0.25); /* Sombra mais forte */
            text-align: center;
            position: relative; /* Para posicionar elementos decorativos e a marca d'água */
            overflow: hidden; /* Esconde partes decorativas que saem da borda */
            animation: scaleIn 0.8s ease-out; /* Animação de escala */
             /* Adicionado para centralizar o certificado dentro da área de resultados */
             margin-left: auto;
             margin-right: auto;
             max-width: 800px; /* Mantém a largura máxima */
             /* display: none; */ /* Oculto via JS */
             transition: background-color 0.3s ease-in-out; /* Transição suave */
        }

         @keyframes scaleIn {
            from { opacity: 0; transform: scale(0.8); }
            to { opacity: 1; transform: scale(1); }
        }

        /* Estilo para a marca d'água no certificado */
        .certificate-watermark {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: contain; /* Ajusta a imagem para caber mantendo a proporção */
            opacity: 0.1; /* Define a transparência para parecer marca d'água */
            z-index: 0; /* Garante que fique atrás do conteúdo */
            pointer-events: none; /* Impede que a imagem interfira com cliques no texto */
        }


        .certificate h2 {
            font-size: 3.5rem; /* Título do certificado maior */
            color: white; /* Cor do texto branca para contraste */
            margin-bottom: 30px; /* Mais espaço */
            font-weight: 800; /* Extra bold */
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1); /* Sombra no texto */
            position: relative; /* Garante que o título fique acima da marca d'água */
            z-index: 1;
        }

        .certificate p {
            font-size: 1.4rem; /* Tamanho maior */
            color: white; /* Cor do texto branca para contraste */
            margin-bottom: 15px;
            position: relative; /* Garante que o texto fique acima da marca d'água */
            z-index: 1;
        }

        .certificate .player-name {
            font-size: 3rem; /* Tamanho do nome maior */
            font-weight: 800; /* Extra bold */
            color: white; /* Cor do nome branca para contraste */
            margin: 30px 0; /* Mais espaço */
            text-transform: uppercase; /* Nome em maiúsculas */
             text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.08); /* Sombra sutil no nome */
             position: relative; /* Garante que o nome fique acima da marca d'água */
            z-index: 1;
        }

        .certificate .final-score {
            font-size: 2.5rem; /* Tamanho da pontuação maior */
            font-weight: 700; /* Bold */
            color: var(--secondary-green); /* Mantém verde vibrante para pontuação */
            margin-top: 25px; /* Mais espaço */
            position: relative; /* Garante que a pontuação fique acima da marca d'água */
            z-index: 1;
        }

        /* Elementos decorativos (opcional, usando CSS) */
        .certificate::before,
        .certificate::after {
            content: '';
            position: absolute;
            width: 180px; /* Tamanho maior */
            height: 180px; /* Tamanho maior */
            background: linear-gradient(to bottom right, rgba(59, 130, 246, 0.2), rgba(165, 180, 252, 0.2)); /* Gradiente azul com transparência */
            border-radius: 50%;
            opacity: 0.8; /* Mais opacidade */
            z-index: 0; /* Garante que fiquem atrás do conteúdo e possivelmente da marca d'água */
            filter: blur(50px); /* Efeito de desfoque maior */
        }

        .certificate::before {
            top: -90px; /* Posição ajustada */
            left: -90px; /* Posição ajustada */
        }

        .certificate::after {
            bottom: -90px; /* Posição ajustada */
            right: -90px; /* Posição ajustada */
        }

        /* Garante que todos os filhos diretos do certificado (exceto a marca d'água) fiquem acima */
         .certificate > *:not(.certificate-watermark) {
             position: relative;
             z-index: 1;
         }


        /* --- Media Query para Tablets (breakpoint md do Tailwind) --- */
        @media (min-width: 768px) {
            .start-container,
            .high-scores-container {
                max-width: 500px; /* Aumenta a largura máxima para tablets */
            }
             /* Opcional: Ajustar padding do container principal em tablets */
             /* .quiz-container { padding: 50px; } */
        }
         /* ------------------------------------------------------------- */

    </style>
</head>
<body>

    <div class="quiz-container">
        <h1 class="main-title">Quiz: Memorial Legislativo Maranhense</h1>

        <div id="start-screen">
            <div class="start-container">
                <label for="player-name">Digite seu nome:</label>
                <input type="text" id="player-name" placeholder="Seu nome aqui">
                <button id="start-button">Começar</button>
            </div>

            <div id="high-scores" class="high-scores-container">
                <h3>Ranking Top 4</h3>
                <ul id="high-scores-list" class="high-scores-list">
                    </ul>
            </div>
             <p id="error-message" class="text-red-600 font-bold mt-4 hidden"></p>
        </div>

        <div id="quiz-area" class="hidden">
            <div class="score-timer-container">
                <div id="score-display" class="score-display">Pontuação: 0</div>
                <div id="timer-display" class="timer-display">Tempo: 1:00</div>
            </div>
             <div id="time-warning-message" class="time-warning-message"></div>
             <div class="progress-bar-container">
                 <div id="time-progress-bar" class="progress-bar"></div>
             </div>

            <div id="question-area" class="question-area">
                </div>

            <div id="feedback" class="feedback">
                </div>

            </div>

        <div id="quiz-results" class="results hidden">
             <div id="certificate" class="certificate hidden">
                <img src="logo190 anos.jpg-4e8bebfd-22a5-406c-8177-b23fcb008cad" alt="Logo 190 anos Assembleia Legislativa" class="certificate-watermark" onerror="this.onerror=null;this.src='https://placehold.co/600x400?text=Erro+ao+carregar+Logo'; console.error('Erro ao carregar a imagem da logo:', this.src);">

                <h2>Certificado de Conclusão</h2>
                <p>Este certificado atesta que</p>
                <p class="player-name"></p>
                <p>concluiu o Quiz sobre o Memorial Legislativo Maranhense com a seguinte pontuação:</p>
                <p class="final-score"></p>
                <p>Parabéns!</p>
            </div>
            <div id="congratulations-message" class="restart-message"></div>
             <button id="back-to-start-button" class="hidden">Voltar para o Início</button>
        </div>
    </div>


    <script>
        // Array de objetos contendo as perguntas, opções e a resposta correta
        const quizData = [
            {
                question: "Qual é o principal objetivo do Memorial Legislativo Maranhense?",
                options: {
                    a: "Ser a sede da Assembleia Legislativa do Maranhão",
                    b: "Preservar e divulgar a história do Poder Legislativo Maranhense",
                    c: "Funcionar como gabinete dos deputados estaduais",
                    d: "Abrigar apenas documentos recentes da legislação"
                },
                correct: "b"
            },
            {
                question: "Onde está localizado o Memorial Legislativo Maranhense?",
                options: {
                    a: "No interior do estado, em Imperatriz",
                    b: "Na capital, São Luís",
                    c: "Em Brasília, junto ao Congresso Nacional",
                    d: "Em um anexo separado da Assembleia Legislativa, mas fora de São Luís"
                },
                correct: "b"
            },
            {
                question: "O que o acervo do Memorial Legislativo Maranhense geralmente inclui?",
                options: {
                    a: "Apenas livros de direito",
                    b: "Documentos históricos, fotografias, objetos e mobiliário relacionados à história legislativa",
                    c: "Somente obras de arte contemporânea",
                    d: "Equipamentos de informática antigos usados na Assembleia"
                },
                correct: "b"
            },
            {
                question: "O Memorial Legislativo Maranhense faz parte de qual instituição?",
                options: {
                    a: "Tribunal de Justiça do Maranhão",
                    b: "Governo do Estado do Maranhão",
                    c: "Assembleia Legislativa do Estado do Maranhão (Alema)",
                    d: "Ministério Público do Maranhão"
                },
                correct: "c"
            },
             {
                question: "Em que ano foi criado o Memorial Legislativo Maranhense? (Esta é uma pergunta fictícia para completar 5)",
                options: {
                    a: "1990",
                    b: "2005",
                    c: "2010",
                    d: "2015"
                },
                correct: "c" // Resposta fictícia
            }
        ];


        // --- Referências aos elementos do DOM ---
        const quizContainerEl = document.querySelector('.quiz-container'); // Contêiner principal do quiz
        const startScreenEl = document.getElementById('start-screen'); // Tela inicial
        const quizAreaEl = document.getElementById('quiz-area'); // Área do quiz (perguntas)
        const resultsEl = document.getElementById('quiz-results'); // Área de resultados finais

        const playerNameInput = document.getElementById('player-name');
        const startButton = document.getElementById('start-button');
        const errorMessageEl = document.getElementById('error-message'); // Elemento para mensagem de erro

        // Elementos do Quiz (dentro da área do quiz)
        const scoreTimerContainerEl = quizAreaEl.querySelector('.score-timer-container'); // Contêiner do score e timer
        const scoreDisplayEl = quizAreaEl.querySelector('#score-display');
        const timerDisplayEl = quizAreaEl.querySelector('#timer-display');
        const timeWarningMessageEl = quizAreaEl.querySelector('#time-warning-message');
        const timeProgressBarContainerEl = quizAreaEl.querySelector('.progress-bar-container'); // Referência ao contêiner da barra
        const timeProgressBarEl = quizAreaEl.querySelector('#time-progress-bar'); // Referência à barra de progresso
        const questionAreaEl = quizAreaEl.querySelector('#question-area');
        const feedbackEl = quizAreaEl.querySelector('#feedback');
        // Removida a referência ao nextButton, pois não é mais usado para avançar


        // Elementos dos Resultados Finais (dentro da área de resultados)
        const certificateEl = resultsEl.querySelector('#certificate'); // Referência ao certificado
        const playerNameCertEl = certificateEl.querySelector('.player-name'); // Nome no certificado
        const finalScoreCertEl = certificateEl.querySelector('.final-score'); // Pontuação no certificado
        const correctCountEl = resultsEl.querySelector('.performance-details .correct-count'); // Elemento para acertos - MOVIDO PARA RESULTS
        const incorrectCountEl = resultsEl.querySelector('.performance-details .incorrect-count'); // Elemento para erros - MOVIDO PARA RESULTS
        const congratulationsMessageEl = resultsEl.querySelector('#congratulations-message'); // Referência ao novo elemento de mensagem de parabéns
        const backToStartButton = resultsEl.querySelector('#back-to-start-button'); // Botão Voltar para o Início - MOVIDO PARA RESULTS


        const highScoresListEl = document.getElementById('high-scores-list'); // Elemento para a lista de high scores


        // --- Variáveis de Estado do Quiz ---
        let currentQuestionIndex = 0;
        let quizScore = 0; // Pontuação baseada apenas em respostas corretas
        let correctAnswersCount = 0; // Contador de respostas corretas
        let incorrectAnswersCount = 0; // Contador de respostas incorretas

        let quizTimer; // Variável para o temporizador TOTAL do quiz
        const totalTimeLimit = 60; // Tempo limite TOTAL do quiz em segundos (1 minuto)
        let timeLeft = totalTimeLimit; // Tempo restante TOTAL do quiz

        let restartTimer; // Variável para o temporizador de reinício
        let playerName = '';
        const MAX_HIGH_SCORES = 4; // Número máximo de high scores a serem exibidos
        const HIGH_SCORES_STORAGE_KEY = 'memorialQuizHighScores'; // Chave para localStorage
        let quizEnded = false; // Flag para controlar se o quiz terminou
        // -------------------------------------


        // --- Cores para interpolação da barra de progresso (RGB) ---
        const startColor = { r: 66, g: 153, b: 225 }; // Tailwind blue-500 (verde no início)
        const endColor = { r: 229, g: 83, b: 62 };   // Tailwind red-600 (vermelho no fim)
        // ----------------------------------------------------------


        // --- Funções de Utilitário ---

        // Função para carregar high scores do localStorage
        function loadHighScores() {
            const highScoresJson = localStorage.getItem(HIGH_SCORES_STORAGE_KEY);
            if (!highScoresJson) {
                return []; // Retorna array vazio se não houver scores salvos
            }
            try {
                return JSON.parse(highScoresJson);
            } catch (e) {
                console.error("Erro ao carregar high scores:", e);
                return [];
            }
        }

        // Função para salvar high scores no localStorage
        function saveHighScores(scores) {
            localStorage.setItem(HIGH_SCORES_STORAGE_KEY, JSON.stringify(scores));
        }

        // Função para exibir high scores na tela inicial
        function displayHighScores() {
            const highScores = loadHighScores();
            highScoresListEl.innerHTML = ''; // Limpa a lista atual

            if (highScores.length === 0) {
                highScoresListEl.innerHTML = '<li>Nenhum recorde ainda. Seja o primeiro!</li>';
                return;
            }

            // Ordena por score (maior primeiro)
            highScores.sort((a, b) => b.score - a.score);

            // Exibe apenas os top MAX_HIGH_SCORES
            for (let i = 0; i < Math.min(highScores.length, MAX_HIGH_SCORES); i++) {
                const scoreEntry = highScores[i];
                const listItem = document.createElement('li');
                // Exibe o nome em caixa alta no ranking também
                listItem.innerHTML = `<strong>${scoreEntry.name.toUpperCase()}</strong>: ${scoreEntry.score} pontos`;
                highScoresListEl.appendChild(listItem);
            }
        }

        // Função para embaralhar um array (Fisher-Yates Shuffle)
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]]; // Troca elementos
            }
            return array;
        }

        // Função para formatar o tempo em minutos:segundos
        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const remainingSeconds = seconds % 60;
            const formattedSeconds = remainingSeconds < 10 ? '0' + remainingSeconds : remainingSeconds;
            return `${minutes}:${formattedSeconds}`;
        }

         // Função para exibir uma mensagem de erro (alternativa ao alert)
        function showErrorMessage(message) {
             // Encontra o elemento de mensagem de erro pré-existente
             const errorEl = document.getElementById('error-message');
             if (errorEl) {
                 errorEl.textContent = message;
                 errorEl.classList.remove('hidden');
             } else {
                 console.error("Elemento de mensagem de erro #error-message não encontrado!");
             }
        }

        // Função para esconder a mensagem de erro
        function hideErrorMessage() {
             const errorEl = document.getElementById('error-message');
             if (errorEl) {
                 errorEl.classList.add('hidden');
                 errorEl.textContent = ''; // Limpa o texto também
             }
        }


        // --- Lógica do Quiz ---

        // Função para iniciar o quiz
        function startQuiz() {
            console.log("startQuiz function called"); // Log para verificar se a função é chamada
            console.log("startScreenEl:", startScreenEl, "quizAreaEl:", quizAreaEl, "resultsEl:", resultsEl); // Log element references

            playerName = playerNameInput.value.trim();
            if (playerName === '') {
                console.log("Player name is empty. Showing error message."); // Log empty name
                 showErrorMessage('Por favor, digite seu nome para começar o quiz.');
                return;
            }

            console.log("Player name entered:", playerName); // Log player name
            hideErrorMessage(); // Esconde a mensagem de erro se o nome for válido
            quizEnded = false; // Reseta a flag de término do quiz

            console.log("Hiding start screen and showing quiz area..."); // Log screen change attempt
            // --- Lógica para esconder a tela inicial e mostrar a área do quiz ---
            if (startScreenEl) startScreenEl.classList.add('hidden'); else console.error("startScreenEl not found for hiding!");
            if (resultsEl) resultsEl.classList.add('hidden'); else console.error("resultsEl not found for hiding!");
            if (quizAreaEl) quizAreaEl.classList.remove('hidden'); else console.error("quizAreaEl not found for showing!");
            console.log("Screen classes updated. Start hidden:", startScreenEl?.classList.contains('hidden'), "Quiz hidden:", quizAreaEl?.classList.contains('hidden')); // Verify class changes
            // ------------------------------------------------------------------

            console.log("Resetting quiz state and starting timer/displaying question...");
            quizScore = 0; // Reseta o score
            correctAnswersCount = 0; // Reseta contadores
            incorrectAnswersCount = 0; // Reseta contadores
            currentQuestionIndex = 0; // Reseta o índice da pergunta
            timeLeft = totalTimeLimit; // Reseta o tempo TOTAL do quiz


            // Show score and timer container when quiz starts
            if (scoreTimerContainerEl) scoreTimerContainerEl.classList.remove('hidden'); else console.error("scoreTimerContainerEl not found for showing!");
            if (timeProgressBarContainerEl) timeProgressBarContainerEl.classList.remove('hidden'); else console.error("timeProgressBarContainerEl not found for showing!");


            // Adiciona um pequeno delay antes de exibir a primeira pergunta e iniciar o timer
            // Isso dá tempo para os elementos estarem disponíveis
            setTimeout(() => {
                 console.log("setTimeout callback executed. Checking elements..."); // Log inside setTimeout
                 // Verifica se os elementos do quiz existem antes de tentar usá-los
                 if (!scoreDisplayEl || !timerDisplayEl || !timeWarningMessageEl || !timeProgressBarEl || !questionAreaEl || !feedbackEl || !resultsEl || !congratulationsMessageEl || !backToStartButton || !certificateEl || !playerNameCertEl || !finalScoreCertEl || !scoreTimerContainerEl || !timeProgressBarContainerEl) {
                      console.error("Alguns elementos do quiz não foram encontrados ao iniciar!");
                       // Poderia adicionar uma mensagem de erro na tela inicial aqui
                      restartQuiz(); // Tenta reiniciar para voltar à tela inicial
                      return; // Sai da função
                 }

                console.log("Elements found. Updating score, starting timer, displaying question..."); // Log before next steps
                updateScoreDisplay(); // Atualiza a exibição do score
                startTotalTimer(); // Inicia o temporizador TOTAL do quiz
                displayQuestion(currentQuestionIndex); // Exibe a primeira pergunta
            }, 100); // Delay de 100ms
        }

        // Função para iniciar o temporizador TOTAL do quiz (60 segundos para todas as perguntas)
        function startTotalTimer() {
             console.log("startTotalTimer function called"); // Log para verificar se a função é chamada
             // Limpa qualquer temporador existente antes de iniciar um novo
            if (quizTimer) {
                clearInterval(quizTimer);
            }

             // Verifica se os elementos do timer e barra existem antes de tentar usá-los
            if (!timerDisplayEl || !timeWarningMessageEl || !timeProgressBarEl) {
                 console.error("Elementos do timer ou barra de progresso não encontrados!");
                 return; // Sai da função se os elementos não forem encontrados
            }

            timerDisplayEl.textContent = `Tempo: ${formatTime(timeLeft)}`; // Exibe o tempo inicial
            timerDisplayEl.classList.remove('timer-alert'); // Remove a classe de alerta do timer, se estiver presente
            timeWarningMessageEl.textContent = ''; // Limpa a mensagem de aviso
            updateProgressBar(); // Atualiza a barra de progresso inicial

            quizTimer = setInterval(() => {
                timeLeft--;
                timerDisplayEl.textContent = `Tempo: ${formatTime(timeLeft)}`;
                updateProgressBar(); // Atualiza a barra de progresso a cada segundo

                // Alerta de tempo acabando no timer display (últimos 10 segundos)
                if (timeLeft <= 10 && timeLeft > 0) {
                    timerDisplayEl.classList.add('timer-alert');
                    timeWarningMessageEl.textContent = 'O tempo está acabando!';
                } else {
                     timerDisplayEl.classList.remove('timer-alert');
                     if (timeLeft > 0) { // Limpa a mensagem apenas se o tempo não esgotou completamente
                         timeWarningMessageEl.textContent = '';
                     }
                }

                if (timeLeft <= 0 && !quizEnded) { // Verifica se o quiz já não terminou
                    clearInterval(quizTimer); // Para o temporador TOTAL
                    showFinalResults(true); // Mostra resultados indicando que o tempo acabou
                }
            }, 1000); // Atualiza a cada 1 segundo
        }


        // Função para atualizar a barra de progresso (baseada no tempo TOTAL)
        function updateProgressBar() {
            // Verifica se o elemento timeProgressBarEl existe antes de tentar manipulá-lo
            if (!timeProgressBarEl) {
                 console.error("timeProgressBarEl not found in updateProgressBar!"); // Log de erro
                 return; // Sai da função se o elemento não for encontrado
            }

            // Calcula a porcentagem do tempo que passou para o quiz TOTAL
            const elapsedTime = totalTimeLimit - timeLeft;
            const percentageElapsed = (elapsedTime / totalTimeLimit) * 100;
            // Garante que a porcentagem não seja negativa ou maior que 100
            const clampedPercentage = Math.max(0, Math.min(100, percentageElapsed));
            timeProgressBarEl.style.width = clampedPercentage + '%';

            // Interpolação de cor (verde no início, vermelho no fim)
            // Calcula a porcentagem do tempo restante para a interpolação de cor
            const percentageRemaining = (timeLeft / totalTimeLimit) * 100;
            // Inverte a porcentagem para que 100% seja azul e 0% seja vermelho
            const colorPercentage = 100 - percentageRemaining;

            const r = Math.round(startColor.r * (1 - colorPercentage / 100) + endColor.r * (colorPercentage / 100));
            const g = Math.round(startColor.g * (1 - colorPercentage / 100) + endColor.g * (colorPercentage / 100));
            const b = Math.round(startColor.b * (1 - colorPercentage / 100) + endColor.b * (colorPercentage / 100));

            timeProgressBarEl.style.backgroundColor = `rgb(${r}, ${g}, ${b})`;

             // Remove a classe alert de CSS, pois a cor é controlada via JS
            timeProgressBarEl.classList.remove('alert');
        }

        // Função para exibir uma pergunta específica
        function displayQuestion(index) {
             console.log("displayQuestion function called for index:", index); // Log para verificar se a função é chamada
             if (quizEnded) return; // Não exibe nova pergunta se o quiz terminou

            // Verifica se o índice da pergunta é válido
            if (index >= quizData.length) {
                // Se não houver mais perguntas, finalize o quiz
                clearInterval(quizTimer); // Para o temporador TOTAL
                showFinalResults(false); // Passa false pois o quiz foi concluído, não pelo tempo
                return;
            }

            // Verifica se os elementos necessários existem antes de tentar manipulá-los
            if (!questionAreaEl || !feedbackEl || !timeWarningMessageEl || !resultsEl || !certificateEl || !congratulationsMessageEl) {
                 console.error("Alguns elementos da pergunta não foram encontrados em displayQuestion!"); // Log de erro
                 // Poderia adicionar uma mensagem de erro na tela do quiz aqui
                 showFinalResults(false); // Tenta ir para a tela de resultados mesmo com erro
                 return; // Sai da função
            }

            const currentQuestion = quizData[index];
            const optionsArray = Object.entries(currentQuestion.options); // Converte opções para array [letra, texto]

            // Embaralha o array de opções para cada pergunta
            const shuffledOptions = shuffleArray([...optionsArray]); // Cria uma cópia antes de embaralhar

            const optionsHtml = [];

            // Constrói o HTML para as opções embaralhadas
            for (const [letter, text] of shuffledOptions) {
                optionsHtml.push(
                    `<label>
                        <input type="radio" name="question${index}" value="${letter}">
                        ${letter.toUpperCase()}) ${text}
                    </label>` // Garante que a letra da opção seja maiúscula
                );
            }

            // Limpa feedback anterior
            feedbackEl.textContent = '';
            feedbackEl.className = 'feedback'; // Reseta classes de cor

            // Oculta a área de resultados e o certificado ao exibir uma nova pergunta
            resultsEl.classList.add('hidden');
            certificateEl.classList.add('hidden');
            congratulationsMessageEl.textContent = ''; // Limpa a mensagem de parabéns/reinício

            // Constrói o HTML para a pergunta e opções
            const output =
                `<div class="question-number">Pergunta ${index + 1} de ${quizData.length}</div>
                 <div class="question">
                    <h3>${currentQuestion.question}</h3>
                    <div class="options">${optionsHtml.join('')}</div>
                </div>`;

            questionAreaEl.innerHTML = output;

            // --- Lógica para aplicar a animação de entrada nas opções ---
            const optionsContainer = questionAreaEl.querySelector('.options');
            if (optionsContainer) {
                 const optionLabels = optionsContainer.querySelectorAll('label');
                 optionLabels.forEach((label, i) => {
                      // Define o atraso da animação usando uma variável CSS
                      label.style.setProperty('--animation-delay', `${i * 0.1}s`); // 100ms de atraso entre cada item

                      // Adiciona a classe que ativa a animação após um pequeno delay
                      // Isso garante que o estado inicial (opacity: 0, transform: translateY(10px)) seja aplicado primeiro
                      setTimeout(() => {
                           label.classList.add('option-item-animate');
                      }, 10); // Pequeno delay para garantir que o render inicial ocorra
                 });

                 // Adiciona event listener para as opções para avanço automático
                 const radioButtons = optionsContainer.querySelectorAll('input[type="radio"]');
                 radioButtons.forEach(radio => {
                      // Remove any existing listeners first to prevent duplicates
                      radio.removeEventListener('change', handleAnswerSelection);
                      radio.addEventListener('change', handleAnswerSelection); // Chama nova função para lidar com a seleção
                 });
            } else {
                 console.error("Options container not found after displaying question!"); // Log de erro
            }
            // ------------------------------------------------------------
        }

        // Função para lidar com a seleção de resposta (chamada pelo event listener)
        function handleAnswerSelection(event) {
             if (quizEnded) return; // Não processa se o quiz terminou

             const optionsContainer = questionAreaEl.querySelector('.options');
             const selectedOptionInput = event.target; // O input de rádio clicado
             const selectedOptionLabel = selectedOptionInput.closest('label'); // A label correspondente

             // Desabilita todas as opções imediatamente para evitar múltiplas respostas
             if (optionsContainer) {
                 const radioButtons = optionsContainer.querySelectorAll('input[type="radio"]');
                 radioButtons.forEach(radio => radio.disabled = true);
             } else {
                  console.error("Options container not found in handleAnswerSelection!"); // Log de erro
             }


             const userAnswer = selectedOptionInput.value;
             const correctAnswer = quizData[currentQuestionIndex].correct;

             // Exibe feedback e atualiza contadores de acerto/erro
             if (userAnswer === correctAnswer) {
                 quizScore += 10; // Adiciona 10 pontos por resposta correta
                 feedbackEl.textContent = 'Correto! +10 pontos';
                 feedbackEl.className = 'feedback correct';
                 correctAnswersCount++; // Incrementa acertos
                 // --- Adiciona classe 'correct' à label selecionada ---
                 if (selectedOptionLabel) {
                      selectedOptionLabel.classList.add('correct');
                 }
                 // ----------------------------------------------------------
             } else {
                 const correctAnswerText = quizData[currentQuestionIndex].options[correctAnswer];
                 feedbackEl.textContent = `Incorreto. A resposta correta é ${correctAnswer.toUpperCase()}) ${correctAnswerText}.`; // Garante letra maiúscula no feedback
                 feedbackEl.className = 'feedback incorrect';
                 incorrectAnswersCount++; // Incrementa erros

                 // --- Destaca a resposta correta em vermelho ---
                 const correctOptionInput = optionsContainer.querySelector(`input[value="${correctAnswer}"]`);
                 if (correctOptionInput) {
                     const correctOptionLabel = correctOptionInput.closest('label');
                     if (correctOptionLabel) {
                         correctOptionLabel.classList.add('highlight-correct');
                          // --- Adiciona classe 'correct' à label correta (para mudar a bolinha) ---
                         correctOptionLabel.classList.add('correct');
                         // ------------------------------------------------------------------------
                     }
                 }
                 // ----------------------------------------------------
                  // --- Adiciona classe 'incorrect' à label selecionada (para mudar a bolinha) ---
                 if (selectedOptionLabel) {
                      selectedOptionLabel.classList.add('incorrect');
                 }
                 // ---------------------------------------------------------------------------------
             }

             updateScoreDisplay(); // Atualiza a exibição do score

             // Avança para a próxima pergunta ou mostra o resultado final após um pequeno atraso
             setTimeout(() => {
                 currentQuestionIndex++;
                 if (currentQuestionIndex < quizData.length) {
                     displayQuestion(currentQuestionIndex); // Exibe a próxima pergunta
                 } else {
                     // Se todas as perguntas foram respondidas antes do tempo acabar
                     clearInterval(quizTimer); // Para o temporador TOTAL
                     showFinalResults(false); // Mostra resultados (quiz concluído antes do tempo)
                 }
             }, 1500); // Atraso de 1.5 segundos para o usuário ver o feedback
        }


        // Função para atualizar a exibição do score
        function updateScoreDisplay() {
             // Verifica se o elemento scoreDisplayEl existe antes de tentar manipulá-lo
            if (!scoreDisplayEl) {
                 console.error("scoreDisplayEl not found in updateScoreDisplay!"); // Log de erro
                 return; // Sai da função se o elemento não for encontrado
            }
            scoreDisplayEl.textContent = `Pontuação: ${quizScore}`;
        }

        // Função para mostrar o resultado final e reiniciar o quiz
        function showFinalResults(timeRanOut) {
            console.log("showFinalResults function called. Time ran out:", timeRanOut); // Log para verificar se a função é chamada
            if (quizEnded) return; // Evita chamar a função múltiplas vezes
            quizEnded = true; // Define a flag de término do quiz

            clearInterval(quizTimer); // Garante que o temporador TOTAL pare

            // --- Lógica para esconder a área do quiz e mostrar a área de resultados ---
            quizAreaEl.classList.add('hidden'); // Esconde a área do quiz
            resultsEl.classList.remove('hidden'); // Mostra a área de resultados
            // -------------------------------------------------------------------------

            // Oculta o score e timer na tela de resultados
            scoreTimerContainerEl.classList.add('hidden');
            timeProgressBarContainerEl.classList.add('hidden');

            // Limpa a área da pergunta e feedback (agora que a quizArea está escondida, isso é menos crítico, mas boa prática)
            questionAreaEl.innerHTML = '';
            feedbackEl.textContent = '';
            timeWarningMessageEl.textContent = ''; // Limpa a mensagem de aviso nos resultados


            // Exibe os detalhes de desempenho na área de resultados (mantido para referência, mas oculto)
            // Verifica se os elementos existem antes de tentar usá-los
            if (correctCountEl && incorrectCountEl) {
                 correctCountEl.textContent = `Acertos: ${correctAnswersCount}`;
                 incorrectCountEl.textContent = `Erros: ${incorrectAnswersCount}`;
                 // Oculta os detalhes de desempenho caso o certificado seja exibido
                 if (correctCountEl.parentElement) {
                     correctCountEl.parentElement.classList.add('hidden');
                 }
            } else {
                 console.warn("Performance details elements not found!");
            }


            // Calcula a pontuação combinada (pontuação do quiz + tempo restante)
            // Se o tempo esgotou, timeLeft será 0 ou negativo, então usamos 0 para o cálculo do ranking
            const timeBonus = Math.max(0, timeLeft); // Garante que o bônus de tempo não seja negativo
            const combinedScore = quizScore + timeBonus; // Usa quizScore (pontos por acerto) + bônus de tempo


            // Carrega high scores existentes
            const highScores = loadHighScores();

            // --- Adiciona a nova pontuação APENAS se for maior que zero ---
            if (combinedScore > 0) {
                // Adiciona a nova pontuação se for um recorde (considerando o top MAX_HIGH_SCORES)
                if (highScores.length < MAX_HIGH_SCORES || combinedScore > highScores[highScores.length - 1].score) {
                     highScores.push({ name: playerName, score: combinedScore });
                     // Ordena e mantém apenas o top N
                     highScores.sort((a, b) => b.score - a.score);
                     highScores.splice(MAX_HIGH_SCORES); // Mantém apenas os top N
                     saveHighScores(highScores); // Salva os high scores atualizados
                     // A exibição do ranking será atualizada na próxima vez que a tela inicial for mostrada
                }
            }
            // -------------------------------------------------------------

             // Ajusta a mensagem de tempo esgotado, se aplicável
             if (timeRanOut) {
                 // Limpa qualquer mensagem anterior de tempo esgotado
                 const existingTimeOutMessage = resultsEl.querySelector('.text-red-600');
                 if (existingTimeOutMessage) {
                     existingTimeOutMessage.remove();
                 }
                 resultsEl.insertAdjacentHTML('afterbegin', '<p class="text-red-600 font-bold mb-4">Tempo esgotado!</p>');
             }


            // --- Lógica para exibir o certificado e iniciar o timer de reinício com mensagem personalizada ---
            // Sempre exibe o certificado na tela de resultados
            if (certificateEl) { // Verifica se o elemento existe
                 playerNameCertEl.textContent = playerName.toUpperCase(); // Converte para caixa alta
                 finalScoreCertEl.textContent = `${quizScore} pontos`; // Exibe APENAS a pontuação do quiz no certificado
                 certificateEl.classList.remove('hidden'); // Mostra o certificado
            } else {
                 console.error("Elemento do certificado não encontrado!");
            }


            let countdown = 10; // Tempo para reiniciar (10 segundos)
            // Mensagem inicial personalizada com o nome do jogador
            if (congratulationsMessageEl) { // Verifica se o elemento existe
                 congratulationsMessageEl.textContent = `Parabéns, ${playerName}! O quiz será reiniciado em ${countdown} segundos...`;
            } else {
                 console.error("Elemento de mensagem de parabéns #congratulations-message não encontrado!");
            }


            // Limpa o temporador de reinício existente antes de iniciar um novo
            if (restartTimer) {
                 clearInterval(restartTimer);
            }

            restartTimer = setInterval(() => {
                countdown--;
                // Atualiza apenas o contador na mensagem existente
                if (congratulationsMessageEl) { // Verifica se o elemento existe antes de atualizar
                     congratulationsMessageEl.textContent = `Parabéns, ${playerName}! O quiz será reiniciado em ${countdown} segundos...`;
                }


                if (countdown <= 0) {
                    clearInterval(restartTimer); // Limpa o temporador de reinício
                    restartQuiz(); // Reinicia o quiz
                }
            }, 1000); // Atualiza a cada 1 segundo
            // ----------------------------------------------------------------------

            // Garante que o botão Voltar para o Início esteja escondido, pois o reinício é automático
             if (backToStartButton) { // Verifica se o elemento existe
                 backToStartButton.classList.add('hidden');
             } else {
                 console.warn("Elemento do botão Voltar para o Início não encontrado.");
             }
        }

        // Função para reiniciar o quiz
        function restartQuiz() {
            console.log("restartQuiz function called"); // Log para verificar se a função é chamada
            clearInterval(quizTimer); // Limpa o temporador do quiz
            clearInterval(restartTimer); // Limpa o temporador de reinício

            currentQuestionIndex = 0; // Reseta o índice da pergunta
            quizScore = 0; // Reseta o score
            correctAnswersCount = 0; // Reseta contadores
            incorrectAnswersCount = 0; // Reseta contadores
            playerNameInput.value = ''; // Limpa o campo do nome

            // --- Lógica para mostrar a tela inicial e esconder as outras áreas ---
            if (resultsEl) resultsEl.classList.add('hidden'); else console.warn("resultsEl not found in restartQuiz.");
            if (quizAreaEl) quizAreaEl.classList.add('hidden'); else console.warn("quizAreaEl not found in restartQuiz.");
            if (startScreenEl) startScreenEl.classList.remove('hidden'); else console.error("startScreenEl not found in restartQuiz!");
            // ------------------------------------------------------------------

            // Oculta o score e timer na tela inicial
            if (scoreTimerContainerEl) scoreTimerContainerEl.classList.add('hidden'); else console.warn("scoreTimerContainerEl not found in restartQuiz.");
            if (timeProgressBarContainerEl) timeProgressBarContainerEl.classList.add('hidden'); else console.warn("timeProgressBarContainerEl not found in restartQuiz.");

            // Oculta o certificado e a mensagem de parabéns/reinício
            if (certificateEl) certificateEl.classList.add('hidden'); else console.warn("certificateEl not found in restartQuiz.");
            if (congratulationsMessageEl) congratulationsMessageEl.textContent = ''; else console.warn("congratulationsMessageEl not found in restartQuiz.");

            // Garante que os detalhes de desempenho estejam escondidos
            if (correctCountEl && correctCountEl.parentElement) {
                 correctCountEl.parentElement.classList.add('hidden');
            } else {
                 console.warn("Performance details parent element not found in restartQuiz.");
            }


            if (timeWarningMessageEl) timeWarningMessageEl.textContent = ''; else console.warn("timeWarningMessageEl not found in restartQuiz."); // Limpa a mensagem de aviso ao reiniciar
            updateScoreDisplay(); // Reseta a exibição do score para 0
            timeLeft = totalTimeLimit; // Reseta o tempo para o próximo quiz
            if (timerDisplayEl) timerDisplayEl.textContent = `Tempo: ${formatTime(timeLeft)}`; else console.warn("timerDisplayEl not found in restartQuiz."); // Reseta a exibição do timer
            if (timerDisplayEl) timerDisplayEl.classList.remove('timer-alert'); else console.warn("timerDisplayEl not found in restartQuiz."); // Remove a classe de alerta
            updateProgressBar(); // Reseta a barra de progresso
            displayHighScores(); // Atualiza a exibição do ranking na tela inicial
            quizEnded = false; // Reseta a flag de término do quiz

            // Esconde o botão Começar ao reiniciar
            if (startButton) startButton.classList.remove('visible'); else console.warn("startButton not found in restartQuiz.");
             // Limpa a mensagem de erro ao reiniciar
            hideErrorMessage();
             // Garante que o botão Voltar para o Início esteja escondido
             if (backToStartButton) backToStartButton.classList.add('hidden'); else console.warn("backToStartButton not found in restartQuiz.");
        }

        // Função para mostrar/esconder o botão Começar com base no input
        function toggleStartButton() {
            if (playerNameInput && startButton) { // Verifica se ambos os elementos existem
                if (playerNameInput.value.trim() !== '') {
                    startButton.classList.add('visible');
                } else {
                    startButton.classList.remove('visible');
                }
            } else {
                console.warn("playerNameInput or startButton not found in toggleStartButton.");
            }
        }

        // Função para exibir uma mensagem de erro (alternativa ao alert)
        function showErrorMessage(message) {
             // Encontra o elemento de mensagem de erro pré-existente
             const errorEl = document.getElementById('error-message');
             if (errorEl) {
                 errorEl.textContent = message;
                 errorEl.classList.remove('hidden');
             } else {
                 console.error("Elemento de mensagem de erro #error-message não encontrado!");
             }
        }

        // Função para esconder a mensagem de erro
        function hideErrorMessage() {
             const errorEl = document.getElementById('error-message');
             if (errorEl) {
                 errorEl.classList.add('hidden');
                 errorEl.textContent = ''; // Limpa o texto também
             }
        }


        // --- Event Listeners ---

        // Carrega e exibe high scores ao carregar a página
        document.addEventListener('DOMContentLoaded', () => {
             console.log("DOMContentLoaded fired."); // Log when DOM is ready
             displayHighScores();
             // Garante que o botão Começar esteja escondido ao carregar a página
             if (startButton) startButton.classList.remove('visible'); else console.error("startButton not found on DOM load!");
             // Garante que a mensagem de erro esteja escondida ao carregar a página
             hideErrorMessage();
             // Garante que a tela de resultados esteja escondida no início
             if (resultsEl) resultsEl.classList.add('hidden'); else console.error("resultsEl not found on DOM load!");

             // Oculta o score e timer na tela inicial
             // Estes elementos estão dentro #quiz-area, que é escondido inicialmente,
             // mas vamos garantir que estejam escondidos explicitamente.
             if (scoreTimerContainerEl) scoreTimerContainerEl.classList.add('hidden'); else console.warn("scoreTimerContainerEl not found on DOM load.");
             if (timeProgressBarContainerEl) timeProgressBarContainerEl.classList.add('hidden'); else console.warn("timeProgressBarContainerEl not found on DOM load.");

             // Oculta o certificado e a mensagem de parabéns/reinício ao carregar a página
             if (certificateEl) certificateEl.classList.add('hidden'); else console.warn("certificateEl not found on DOM load.");
             if (congratulationsMessageEl) congratulationsMessageEl.textContent = ''; else console.warn("congratulationsMessageEl not found on DOM load.");

             // Garante que os detalhes de desempenho estejam escondidos
            if (correctCountEl && correctCountEl.parentElement) {
                 correctCountEl.parentElement.classList.add('hidden');
            } else {
                 console.warn("Performance details parent element not found on DOM load.");
            }
             // Garante que o botão Voltar para o Início esteja escondido
             if (backToStartButton) {
                 backToStartButton.classList.add('hidden');
             } else {
                 console.error("backToStartButton not found on DOM load, cannot add event listener.");
             }

             console.log("DOMContentLoaded finished."); // Log when DOMContentLoaded is done
        });


        // Adiciona o event listener para o botão "Começar Quiz"
        if (startButton) { // Verifica se o elemento existe antes de adicionar o listener
            startButton.addEventListener('click', startQuiz);
        } else {
            console.error("startButton not found, cannot attach click listener.");
        }


        // Adiciona event listener para as opções de resposta (para avanço automático)
        // Este listener é adicionado dinamicamente na função displayQuestion

        // Adiciona event listener para o input do nome do jogador
        if (playerNameInput) { // Verifica se o elemento existe antes de adicionar o listener
            playerNameInput.addEventListener('input', toggleStartButton);
        } else {
            console.error("playerNameInput not found, cannot attach input listener.");
        }


        // Event listener para o botão "Voltar para o Início" (mantido, mas não usado no fluxo automático)
        // Verifica se o backToStartButton existe antes de adicionar o event listener
        if (backToStartButton) {
             backToStartButton.addEventListener('click', restartQuiz);
        } else {
             console.warn("backToStartButton not found on DOM load, cannot add event listener."); // Alterado para warn, pois não é crítico para o fluxo principal
        }


    </script>

</body>
</html>
